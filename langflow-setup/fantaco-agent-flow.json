{
  "name": "Fantaco Agent with MCP Tools",
  "description": "Agent flow using vLLM with Customer and Finance MCP servers",
  "data": {
    "nodes": [
      {
        "id": "ChatInput-001",
        "type": "ChatInput",
        "position": { "x": 100, "y": 300 },
        "data": {
          "id": "ChatInput-001",
          "type": "ChatInput",
          "display_name": "Chat Input",
          "description": "Get chat inputs from the Playground.",
          "node": {
            "display_name": "Chat Input",
            "description": "Get chat inputs from the Playground.",
            "base_classes": ["Message"],
            "icon": "MessagesSquare",
            "template": {
              "input_value": {
                "display_name": "Text",
                "info": "Message to be passed as input.",
                "value": ""
              },
              "sender": {
                "value": "User",
                "options": ["Machine", "User"]
              },
              "sender_name": {
                "value": "User"
              },
              "should_store_message": {
                "value": true
              }
            }
          }
        }
      },
      {
        "id": "ChatOutput-001",
        "type": "ChatOutput",
        "position": { "x": 900, "y": 300 },
        "data": {
          "id": "ChatOutput-001",
          "type": "ChatOutput",
          "display_name": "Chat Output",
          "description": "Display chat outputs in the Playground.",
          "node": {
            "display_name": "Chat Output",
            "description": "Display chat outputs in the Playground.",
            "base_classes": ["Message"],
            "icon": "MessagesSquare",
            "template": {
              "input_value": {
                "display_name": "Text",
                "info": "Message to be displayed.",
                "input_types": ["Message"]
              },
              "sender": {
                "value": "Machine",
                "options": ["Machine", "User"]
              },
              "sender_name": {
                "value": "AI"
              },
              "should_store_message": {
                "value": true
              }
            }
          }
        }
      },
      {
        "id": "Agent-001",
        "type": "Agent",
        "position": { "x": 500, "y": 300 },
        "data": {
          "id": "Agent-001",
          "type": "Agent",
          "display_name": "Agent",
          "description": "An agent that uses tools to answer questions.",
          "node": {
            "display_name": "Agent",
            "description": "An agent that uses tools to answer questions.",
            "base_classes": ["Message"],
            "icon": "Bot",
            "template": {
              "input_value": {
                "display_name": "Input",
                "info": "The input message.",
                "input_types": ["Message"],
                "required": true
              },
              "llm": {
                "display_name": "Language Model",
                "info": "The language model to use.",
                "input_types": ["LanguageModel"],
                "required": true
              },
              "tools": {
                "display_name": "Tools",
                "info": "Tools available to the agent.",
                "input_types": ["Tool"],
                "list": true,
                "required": false
              },
              "system_prompt": {
                "display_name": "System Prompt",
                "info": "System message for the agent.",
                "value": "You are a helpful assistant with access to customer and finance tools. Use the available tools to help answer questions about customers, orders, and invoices.",
                "multiline": true
              },
              "max_iterations": {
                "display_name": "Max Iterations",
                "info": "Maximum number of tool-calling iterations.",
                "value": 10
              }
            }
          }
        }
      },
      {
        "id": "VLLMModel-001",
        "type": "VLLMModel",
        "position": { "x": 300, "y": 100 },
        "data": {
          "id": "VLLMModel-001",
          "type": "VLLMModel",
          "display_name": "vLLM",
          "description": "Generates text using vLLM models via OpenAI-compatible API.",
          "node": {
            "display_name": "vLLM",
            "description": "Generates text using vLLM models via OpenAI-compatible API.",
            "base_classes": ["LanguageModel"],
            "icon": "server",
            "template": {
              "api_base": {
                "display_name": "vLLM API Base URL",
                "info": "The base URL of your vLLM server",
                "value": "http://vllm-service:8000/v1",
                "required": true
              },
              "model_name": {
                "display_name": "Model Name",
                "info": "The name of the model served by vLLM",
                "value": "",
                "required": true
              },
              "api_key": {
                "display_name": "API Key",
                "info": "API Key for vLLM server (use EMPTY if not required)",
                "value": "EMPTY",
                "password": true
              },
              "temperature": {
                "display_name": "Temperature",
                "info": "Controls randomness in the output.",
                "value": 0.1
              }
            }
          }
        }
      },
      {
        "id": "MCPStreamableHTTP-Customer",
        "type": "MCPStreamableHTTP",
        "position": { "x": 300, "y": 500 },
        "data": {
          "id": "MCPStreamableHTTP-Customer",
          "type": "MCPStreamableHTTP",
          "display_name": "MCP Streamable HTTP (Customer)",
          "description": "Connects to Customer MCP server.",
          "node": {
            "display_name": "MCP Streamable HTTP",
            "description": "Connects to an MCP server using Streamable HTTP transport.",
            "base_classes": ["Tool"],
            "icon": "globe",
            "template": {
              "server_url": {
                "display_name": "MCP Server URL",
                "info": "The URL of your MCP server",
                "value": "https://mcp-customer-route-agentic-user5.apps.cluster-q5gsb.dynamic.redhatworkshops.io/mcp",
                "required": true
              },
              "server_name": {
                "display_name": "Server Name",
                "info": "A friendly name for this MCP server",
                "value": "Customer",
                "required": true
              },
              "api_key": {
                "display_name": "API Key (optional)",
                "info": "API key if required",
                "value": "",
                "password": true
              }
            }
          }
        }
      },
      {
        "id": "MCPStreamableHTTP-Finance",
        "type": "MCPStreamableHTTP",
        "position": { "x": 500, "y": 500 },
        "data": {
          "id": "MCPStreamableHTTP-Finance",
          "type": "MCPStreamableHTTP",
          "display_name": "MCP Streamable HTTP (Finance)",
          "description": "Connects to Finance MCP server.",
          "node": {
            "display_name": "MCP Streamable HTTP",
            "description": "Connects to an MCP server using Streamable HTTP transport.",
            "base_classes": ["Tool"],
            "icon": "globe",
            "template": {
              "server_url": {
                "display_name": "MCP Server URL",
                "info": "The URL of your MCP server",
                "value": "https://mcp-finance-route-agentic-user5.apps.cluster-q5gsb.dynamic.redhatworkshops.io/mcp",
                "required": true
              },
              "server_name": {
                "display_name": "Server Name",
                "info": "A friendly name for this MCP server",
                "value": "Finance",
                "required": true
              },
              "api_key": {
                "display_name": "API Key (optional)",
                "info": "API key if required",
                "value": "",
                "password": true
              }
            }
          }
        }
      }
    ],
    "edges": [
      {
        "id": "edge-chatinput-agent",
        "source": "ChatInput-001",
        "target": "Agent-001",
        "sourceHandle": "message",
        "targetHandle": "input_value",
        "data": {
          "sourceHandle": {
            "dataType": "ChatInput",
            "id": "ChatInput-001",
            "name": "message",
            "output_types": ["Message"]
          },
          "targetHandle": {
            "fieldName": "input_value",
            "id": "Agent-001",
            "inputTypes": ["Message"],
            "type": "str"
          }
        }
      },
      {
        "id": "edge-agent-chatoutput",
        "source": "Agent-001",
        "target": "ChatOutput-001",
        "sourceHandle": "response",
        "targetHandle": "input_value",
        "data": {
          "sourceHandle": {
            "dataType": "Agent",
            "id": "Agent-001",
            "name": "response",
            "output_types": ["Message"]
          },
          "targetHandle": {
            "fieldName": "input_value",
            "id": "ChatOutput-001",
            "inputTypes": ["Message"],
            "type": "str"
          }
        }
      },
      {
        "id": "edge-vllm-agent",
        "source": "VLLMModel-001",
        "target": "Agent-001",
        "sourceHandle": "model",
        "targetHandle": "llm",
        "data": {
          "sourceHandle": {
            "dataType": "VLLMModel",
            "id": "VLLMModel-001",
            "name": "model",
            "output_types": ["LanguageModel"]
          },
          "targetHandle": {
            "fieldName": "llm",
            "id": "Agent-001",
            "inputTypes": ["LanguageModel"],
            "type": "LanguageModel"
          }
        }
      },
      {
        "id": "edge-mcp-customer-agent",
        "source": "MCPStreamableHTTP-Customer",
        "target": "Agent-001",
        "sourceHandle": "tools",
        "targetHandle": "tools",
        "data": {
          "sourceHandle": {
            "dataType": "MCPStreamableHTTP",
            "id": "MCPStreamableHTTP-Customer",
            "name": "tools",
            "output_types": ["Tool"]
          },
          "targetHandle": {
            "fieldName": "tools",
            "id": "Agent-001",
            "inputTypes": ["Tool"],
            "type": "list"
          }
        }
      },
      {
        "id": "edge-mcp-finance-agent",
        "source": "MCPStreamableHTTP-Finance",
        "target": "Agent-001",
        "sourceHandle": "tools",
        "targetHandle": "tools",
        "data": {
          "sourceHandle": {
            "dataType": "MCPStreamableHTTP",
            "id": "MCPStreamableHTTP-Finance",
            "name": "tools",
            "output_types": ["Tool"]
          },
          "targetHandle": {
            "fieldName": "tools",
            "id": "Agent-001",
            "inputTypes": ["Tool"],
            "type": "list"
          }
        }
      }
    ],
    "viewport": {
      "x": 0,
      "y": 0,
      "zoom": 1
    }
  }
}
